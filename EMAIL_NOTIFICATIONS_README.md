# üìß –°–∏—Å—Ç–µ–º–∞ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `node test-email.js`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É `petrusenkokv@yandex.ru`

2. **API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - —Å–æ–∑–¥–∞–Ω endpoint:
   - POST `/api/notifications/send`
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: `{ type, appointment, student, trainerEmail }`

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã API –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í `client/src/components/schedule/booking-widget.tsx` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏:

```typescript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏
if (createAppointmentMutation.isSuccess) {
  // –ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —É—á–µ–Ω–∏–∫–∞
  const student = { firstName, lastName, email, phone };
  
  // –û—Ç–ø—Ä–∞–≤—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä—É
  await fetch('http://localhost:8080/api/notifications/send', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      type: 'new-booking',
      appointment: newAppointment,
      student: student,
      trainerEmail: 'petrusenkokv@yandex.ru'
    })
  });
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Edge Functions

–°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤ Supabase, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ.

## üìß –§—É–Ω–∫—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—É–∂–µ –≥–æ—Ç–æ–≤—ã)

1. **notifyTrainerNewBooking** - –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞
2. **notifyStudentBookingConfirmed** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è —É—á–µ–Ω–∏–∫–∞
3. **notifyReminder24h** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 24—á
4. **notifyReminder2h** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 2—á
5. **notifyCancellation** - –æ—Ç–º–µ–Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ email
```bash
node test-email.js
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!
Message ID: <...>
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É: petrusenkokv@yandex.ru
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–∫–∏ –°–ü–ê–ú
- –û—Ç–∫—Ä–æ–π—Ç–µ –Ø–Ω–¥–µ–∫—Å –ü–æ—á—Ç—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"
- –ü–µ—Ä–≤—ã–µ –ø–∏—Å—å–º–∞ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å —Ç—É–¥–∞

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å backend —Å–µ—Ä–≤–µ—Ä–∞:
```
üìß Sending notification: { type: 'new-booking', ... }
‚úÖ Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: petrusenkokv@yandex.ru - –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
```

## üìù –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ SMTP –Ω–∞—Å—Ç—Ä–æ–µ–Ω (Yandex)
- ‚úÖ –ü–æ—á—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª)
- ‚úÖ API endpoint —Å–æ–∑–¥–∞–Ω
- ‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Å–µ–π—á–∞—Å

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** - —Ä–∞–±–æ—Ç–∞—é—Ç!
   - –ö–∞–∂–¥—ã–µ 4 —á–∞—Å–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø–∏—Å–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 24—á –∏ 2—á

2. **–†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç!
   - –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ POST `/api/notifications/send`

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏** - –¢–†–ï–ë–£–ï–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–æ–∫ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã API –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Edge Functions/Webhooks.

