# Инструкция: Как добавить тренера Петрусенко К.В. в базу данных

## Проблема

Тренер с email `petrusenko@fittrak.pro` не существует в базе данных, из-за этого:
- Ошибки 406 при авторизации
- Профиль не загружается
- Нет фото тренера

## Решение

### Вариант 1: Через Supabase Dashboard (рекомендуется)

1. Откройте [Supabase Dashboard](https://supabase.com/dashboard)
2. Выберите ваш проект
3. Откройте **SQL Editor**
4. Выполните следующий SQL:

```sql
-- Добавляем колонку photo если ее нет
DO $$ 
BEGIN
  IF NOT EXISTS (
    SELECT 1 
    FROM information_schema.columns 
    WHERE table_name = 'users' 
    AND column_name = 'photo'
  ) THEN
    ALTER TABLE users ADD COLUMN photo TEXT;
  END IF;
END $$;

-- Создаем тренера Петрусенко К.В.
INSERT INTO users (
  id,
  username,
  password,
  first_name,
  last_name,
  middle_name,
  birth_date,
  email,
  phone,
  photo,
  is_trainer,
  created_at,
  updated_at
) VALUES (
  '2e6d1673-205a-4200-bc04-249dc2af269b',
  'petrusenkokv',
  '$2b$10$XqZzXqZzXqZzXqZzXqZzXOUqZzXqZzXqZzXqZzXqZzXqZzXqZzXq', -- ВАЖНО: Замените на реальный bcrypt хеш
  'Кирилл',
  'Петрусенко',
  'Владимирович',
  '15.05.1990',
  'petrusenkokv@yandex.ru',
  '+7 (999) 888-77-66',
  NULL, -- Фото будет добавлено через интерфейс
  true,
  NOW(),
  NOW()
) ON CONFLICT (id) DO UPDATE SET
  first_name = EXCLUDED.first_name,
  last_name = EXCLUDED.last_name,
  email = EXCLUDED.email,
  phone = EXCLUDED.phone,
  updated_at = NOW();
```

### Вариант 2: Через Supabase CLI

```bash
# Если используете Supabase CLI
supabase db execute -f scripts/add-photo-column.sql
```

## Шаги после добавления тренера

1. **Войдите как тренер**:
   - Email: `petrusenkokv@yandex.ru`
   - Пароль: тот, который вы указали при создании

2. **Загрузите фото**:
   - Откройте профиль
   - Нажмите "Изменить"
   - Загрузите фото
   - Сохраните

3. **Проверьте профиль**:
   - Должны быть видны имя, фамилия, email
   - Должно отображаться фото

## Проверка

Выполните в SQL Editor:

```sql
SELECT id, username, first_name, last_name, email, photo, is_trainer 
FROM users 
WHERE id = '2e6d1673-205a-4200-bc04-249dc2af269b';
```

Должна вернуться одна строка с данными тренера.

## Важно

⚠️ **Пароль в SQL скрипте - это заглушка!** 

Замените на реальный bcrypt хеш или:
1. Используйте Supabase Auth для создания пользователя
2. Затем обновите запись в таблице users

## Создание хеша пароля (Node.js)

```javascript
const bcrypt = require('bcrypt');
const hash = await bcrypt.hash('ваш_пароль', 10);
console.log(hash);
```

