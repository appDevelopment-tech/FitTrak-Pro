# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞

1. –¢—Ä–µ–Ω–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞—è–≤–∫—É - –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞
2. –¢—Ä–µ–Ω–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É - –∫–Ω–æ–ø–∫–∞ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞
3. –£—á–µ–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ—é –∑–∞–ø–∏—Å—å

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞ - –∫–Ω–æ–ø–∫–∏ –≤ –±–ª–æ–∫–µ "–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"

**–§–∞–π–ª:** `client/src/components/schedule/trainer-schedule.tsx`

–î–æ–±–∞–≤–ª–µ–Ω–æ:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø–æ—Å–ª–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

```typescript
// –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
onClick={() => {
  console.log("‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∑–∞—è–≤–∫—É:", apt.id);
  updateAppointmentMutation.mutate({ id: apt.id, status: 'confirmed' });
}}
disabled={updateAppointmentMutation.isPending}

// –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
onClick={async () => {
  console.log("‚ùå –û—Ç–∫–ª–æ–Ω—è–µ–º –∑–∞—è–≤–∫—É:", apt.id);
  try {
    await appointmentsDb.delete(apt.id);
    queryClient.invalidateQueries({ queryKey: ['appointments', trainerId] });
    toast({ title: "–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞", variant: "default" });
  } catch (error: any) {
    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏:", error);
    toast({ title: "–û—à–∏–±–∫–∞", description: error.message || "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É", variant: "destructive" });
  }
}}
```

### 2. –î–ª—è —É—á–µ–Ω–∏–∫–∞ - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å —Å–≤–æ—é –∑–∞–ø–∏—Å—å

**–§–∞–π–ª:** `client/src/components/schedule/schedule-slot.tsx`

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleCancelBooking()`
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∑–∞–ø–∏—Å—å—é
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
// –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
const isDisabled = slotInfo.status === 'full' && !slotInfo.userAppointment;

// –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø–∏—Å–∏
const handleCancelBooking = () => {
  if (slotInfo.userAppointment) {
    console.log("üóëÔ∏è –û—Ç–º–µ–Ω—è–µ–º –∑–∞–ø–∏—Å—å:", slotInfo.userAppointment.id);
    deleteAppointmentMutation.mutate(slotInfo.userAppointment.id);
  }
};

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —É—á–µ–Ω–∏–∫–∞
<Button
  onClick={(e) => {
    e.stopPropagation();
    if (slotInfo.status === 'user-booked') {
      handleCancelBooking();
    } else {
      handleSlotClick();
    }
  }}
>
  {getButtonText()}
</Button>
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ API

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ó–∞–º–µ–Ω–µ–Ω–æ `api.appointments.delete()` –Ω–∞ `appointmentsDb.delete()`
- –ó–∞–º–µ–Ω–µ–Ω–æ `api.appointments.create()` –Ω–∞ `appointmentsDb.create()`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞:

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ"
3. –ù–∞–π–¥–∏—Ç–µ –±–ª–æ–∫ "–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"
4. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" - –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
5. –°–æ–∑–¥–∞–π—Ç–µ –µ—â–µ –æ–¥–Ω—É –∑–∞—è–≤–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" - –∑–∞–ø–∏—Å—å –∏—Å—á–µ–∑–Ω–µ—Ç

### –î–ª—è —É—á–µ–Ω–∏–∫–∞:

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —É—á–µ–Ω–∏–∫
2. –ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –ª—é–±–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π —Å–ª–æ—Ç
3. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–º–µ–Ω–∏—Ç—å" –Ω–∞ —Å–≤–æ–µ–π –∑–∞–ø–∏—Å–∏
4. –ó–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
5. –ü–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞"

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
- `‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∑–∞—è–≤–∫—É:` - –∫–æ–≥–¥–∞ —Ç—Ä–µ–Ω–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç
- `‚ùå –û—Ç–∫–ª–æ–Ω—è–µ–º –∑–∞—è–≤–∫—É:` - –∫–æ–≥–¥–∞ —Ç—Ä–µ–Ω–µ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç
- `üóëÔ∏è –û—Ç–º–µ–Ω—è–µ–º –∑–∞–ø–∏—Å—å:` - –∫–æ–≥–¥–∞ —É—á–µ–Ω–∏–∫ –æ—Ç–º–µ–Ω—è–µ—Ç
- `üìù –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å` - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
- `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏:` - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –°—Ç–∞—Ç—É—Å—ã –∑–∞–ø–∏—Å–µ–π

- `pending` - –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–∂–µ–ª—Ç–∞—è —Ç–æ—á–∫–∞)
- `confirmed` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (–∑–µ–ª–µ–Ω–∞—è —Ç–æ—á–∫–∞)

## –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è:
- `queryClient.invalidateQueries({ queryKey: ['appointments', trainerId] })`
- `queryClient.invalidateQueries({ queryKey: ['appointments'] })`

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è.

